{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "avatar-stack",
  "type": "registry:ui",
  "title": "Avatar Stack",
  "description": "A component that stacks and overlaps a list of avatars.",
  "registryDependencies": [
    "TODO:/index.json"
  ],
  "files": [
    {
      "path": "components/ui/avatar-stack.tsx",
      "content": "import { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\nimport { cn } from \"@/lib/utils\";\nimport * as React from \"react\";\n\ninterface AvatarStackProps extends React.ComponentProps<\"div\"> {\n  orientation?: \"horizontal\" | \"vertical\";\n  max?: number;\n  size?: number;\n  overlapRatio?: number;\n  gapRatio?: number;\n  mask?: boolean;\n}\n\nexport function AvatarStack({\n  children,\n  className,\n  orientation = \"horizontal\",\n  max, // Max visible avatars before \"+N\"\n  size = 32, // Avatar size in pixels\n  overlapRatio = 0.2, // 20% of avatar size\n  gapRatio = 0.15, // 15% of avatar size\n  mask = true,\n  ...props\n}: AvatarStackProps) {\n  const isHorizontal = orientation === \"horizontal\";\n\n  const avatarItems = React.Children.toArray(children).filter(\n    (child) => React.isValidElement(child) && child.type === Avatar\n  );\n\n  const avatarsCount = avatarItems.length;\n  const showOverflow = max && avatarsCount > max;\n  const overflowCount = showOverflow ? avatarsCount - max : 0;\n  const visibleAvatars = showOverflow ? avatarItems.slice(0, max) : avatarItems;\n\n  return (\n    <div\n      data-slot=\"avatar-stack\"\n      data-orientation={orientation}\n      data-size={size}\n      data-overlap-ratio={overlapRatio}\n      data-gap-ratio={gapRatio}\n      data-mask={mask}\n      data-max={max}\n      className={cn(\n        \"group flex items-center\",\n        isHorizontal ? \"flex-row\" : \"flex-col\",\n        isHorizontal ? cn(`-space-x-[var(--overlap)]`) : cn(`-space-y-[var(--overlap)]`),\n        className\n      )}\n      style={\n        {\n          \"--overlap\": `${overlapRatio * size}px`,\n        } as React.CSSProperties\n      }\n      {...props}\n    >\n      {visibleAvatars.map((child, index) => {\n        return (\n          <AvatarWrapper\n            key={index}\n            index={index}\n            size={size}\n            orientation={orientation}\n            overlapRatio={overlapRatio}\n            gapRatio={gapRatio}\n            mask={mask}\n          >\n            {child}\n          </AvatarWrapper>\n        );\n      })}\n\n      {showOverflow && (\n        <AvatarWrapper\n          index={visibleAvatars.length}\n          size={size}\n          orientation={orientation}\n          overlapRatio={overlapRatio}\n          gapRatio={gapRatio}\n          mask={mask}\n        >\n          <Avatar>\n            <AvatarFallback className=\"text-muted-foreground text-xs font-medium\">\n              +{overflowCount}\n            </AvatarFallback>\n          </Avatar>\n        </AvatarWrapper>\n      )}\n    </div>\n  );\n}\n\ninterface AvatarWrapperProps extends React.ComponentProps<\"div\"> {\n  size: number;\n  index: number;\n  orientation: \"horizontal\" | \"vertical\";\n  overlapRatio: number;\n  gapRatio: number;\n  mask: boolean;\n}\n\nfunction AvatarWrapper({\n  children,\n  size,\n  index,\n  orientation,\n  overlapRatio,\n  gapRatio,\n  mask,\n}: AvatarWrapperProps) {\n  const isHorizontal = orientation === \"horizontal\";\n  const isFirst = index === 0;\n\n  // Only mask if there's actual overlap and not the first avatar\n  const shouldMask = mask && overlapRatio > 0 && !isFirst;\n  // The physical overlap distance in pixels\n  const overlapPx = overlapRatio * size;\n\n  // This creates a consistent visible gap regardless of overlap amount\n  const gapWidth = size * gapRatio;\n\n  // Geometric center of previous avatar\n  const geometricCenter = overlapPx - size / 2;\n  // Push mask inward by half the gap width to create the visible separation\n  const maskOffset = Math.round(geometricCenter + gapWidth / 2);\n\n  const maskImage = isHorizontal\n    ? `radial-gradient(circle ${size / 2}px at ${maskOffset}px 50%, transparent 99%, black 100%)`\n    : `radial-gradient(circle ${size / 2}px at 50% ${maskOffset}px, transparent 99%, black 100%)`;\n\n  const style: React.CSSProperties = {\n    width: size,\n    height: size,\n    ...(shouldMask && {\n      maskImage,\n      WebkitMaskImage: maskImage,\n      maskSize: \"cover\",\n      WebkitMaskSize: \"cover\",\n      maskRepeat: \"no-repeat\",\n      WebkitMaskRepeat: \"no-repeat\",\n    }),\n  };\n\n  return (\n    <div\n      data-slot=\"avatar-wrapper\"\n      className={cn(\n        \"relative flex shrink-0 overflow-hidden rounded-full\",\n        \"[&_[data-slot=avatar]]:size-full\",\n        \"transform-gpu antialiased\"\n      )}\n      style={style}\n    >\n      {children}\n    </div>\n  );\n}\n",
      "type": "registry:ui"
    }
  ],
  "meta": {
    "bundle": "pro-marketing"
  }
}